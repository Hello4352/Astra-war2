<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Core Breaker</title>
    <style>
        /* 기본 스타일 */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }

        /* 메인 메뉴 화면 */
        #main-menu {
            text-align: center;
            padding: 40px;
            border-radius: 10px;
            background-color: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        #main-menu h1 {
            margin-bottom: 20px;
        }

        #main-menu p {
            max-width: 500px;
            line-height: 1.6;
            color: #555;
        }

        #start-button {
            margin-top: 20px;
            padding: 12px 25px;
            font-size: 18px;
            cursor: pointer;
            border: none;
            background-color: #4CAF50;
            color: white;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        #start-button:hover {
            background-color: #45a049;
        }

        /* 게임 컨테이너 (시작 시 표시) */
        #game-container {
            display: none;
            flex-direction: column;
            align-items: center;
        }
        
        #status-panel {
            margin-bottom: 15px;
            font-size: 1.2em;
            font-weight: bold;
            background-color: white;
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* 게임 보드 스타일 */
        #game-board {
            display: grid;
            grid-template-columns: 30px repeat(10, 50px); /* 세로 라벨 + 10개 열 */
            grid-template-rows: 30px repeat(10, 50px); /* 가로 라벨 + 10개 행 */
            border: 2px solid #333;
            background-color: #fff;
        }

        .cell, .label {
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }

        .cell {
            width: 50px;
            height: 50px;
            border: 1px solid #ddd;
            box-sizing: border-box; /* 테두리 포함 크기 계산 */
        }
        
        /* 체크무늬 스타일 */
        .cell:nth-child(-2n+10).light,
        .cell:nth-child(2n+13).light { background: #f0d9b5; }
        .cell:nth-child(-2n+10).dark,
        .cell:nth-child(2n+13).dark { background: #b58863; }


        .label {
            color: #555;
        }

        /* 코어 스타일 */
        .core {
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
            color: white;
            font-size: 1.5em;
        }

        .core-p1 {
            background-color: rgba(70, 130, 180, 0.8); /* SteelBlue */
        }
        
        .core-p2 {
            background-color: rgba(220, 20, 60, 0.8); /* Crimson */
        }
    </style>
</head>
<body>

    <div id="main-menu">
        <h1>Core Breaker</h1>
        <div id="game-rules">
            <h2>게임 룰</h2>
            <p>
                Core Breaker는 1대1 전략 보드게임입니다.<br>
                각 플레이어는 자신의 코어를 보호하는 동시에 상대방의 코어를 파괴해야 합니다.<br>
                코어의 체력은 3이며, 체력이 먼저 0이 되는 플레이어가 패배합니다.
            </p>
        </div>
        <button id="start-button">게임 시작</button>
    </div>

    <div id="game-container">
        <div id="status-panel">P1 Core HP: 3 | P2 Core HP: 3</div>
        <div id="game-board"></div>
    </div>

    <script>
        // --- DOM 요소 가져오기 ---
        const mainMenu = document.getElementById('main-menu');
        const gameContainer = document.getElementById('game-container');
        const startButton = document.getElementById('start-button');
        const boardElement = document.getElementById('game-board');
        const statusPanel = document.getElementById('status-panel');

        // --- 게임 상태 변수 ---
        const BOARD_SIZE = 10;
        const P1_CORE_LOCATIONS = ['b2', 'c2', 'b3', 'c3'];
        const P2_CORE_LOCATIONS = ['h8', 'i8', 'h9', 'i9'];
        let coreHealth = {
            p1: 3,
            p2: 3,
        };

        // --- 함수 정의 ---

        /**
         * 게임 보드를 생성하고 화면에 표시하는 함수
         */
        function createBoard() {
            boardElement.innerHTML = ''; // 기존 보드 초기화
            const cols = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'];

            for (let row = 0; row <= BOARD_SIZE; row++) {
                for (let col = 0; col <= BOARD_SIZE; col++) {
                    const element = document.createElement('div');
                    
                    if (row === 0 && col === 0) {
                        element.classList.add('label');
                    } else if (row === 0) {
                        // 상단 알파벳 라벨 (a-j)
                        element.classList.add('label');
                        element.textContent = cols[col - 1];
                    } else if (col === 0) {
                        // 좌측 숫자 라벨 (1-10)
                        element.classList.add('label');
                        element.textContent = row;
                    } else {
                        // 실제 게임 셀
                        const cellId = `${cols[col - 1]}${row}`;
                        element.classList.add('cell');
                        element.id = cellId;

                        // 체크무늬 배경색 적용
                        if ((row + col) % 2 === 0) {
                            element.style.backgroundColor = '#f0d9b5'; // 밝은 칸
                        } else {
                            element.style.backgroundColor = '#b58863'; // 어두운 칸
                        }

                        element.addEventListener('click', handleCellClick);
                    }
                    boardElement.appendChild(element);
                }
            }
        }

        /**
         * 지정된 위치에 코어를 배치하는 함수
         */
        function placeCores() {
            P1_CORE_LOCATIONS.forEach(id => {
                const cell = document.getElementById(id);
                if (cell) {
                    cell.classList.add('core', 'core-p1');
                    cell.textContent = '❤️';
                }
            });

            P2_CORE_LOCATIONS.forEach(id => {
                const cell = document.getElementById(id);
                if (cell) {
                    cell.classList.add('core', 'core-p2');
                    cell.textContent = '❤️';
                }
            });
        }
        
        /**
         * 상태 패널의 텍스트를 업데이트하는 함수
         */
        function updateStatus() {
            statusPanel.textContent = `P1 Core HP: ${coreHealth.p1} | P2 Core HP: ${coreHealth.p2}`;
            if (coreHealth.p1 <= 0) {
                 statusPanel.textContent = 'Player 2 Wins!';
                 boardElement.style.pointerEvents = 'none'; // 게임 종료 시 클릭 방지
            }
            if (coreHealth.p2 <= 0) {
                 statusPanel.textContent = 'Player 1 Wins!';
                 boardElement.style.pointerEvents = 'none';
            }
        }


        /**
         * 게임 셀을 클릭했을 때 호출될 함수 (현재는 테스트용)
         * @param {Event} event 클릭 이벤트
         */
        function handleCellClick(event) {
            const clickedId = event.target.id;
            
            // TODO: 향후 이 곳에 유닛 선택, 이동, 공격 등 실제 게임 로직이 들어갑니다.
            // 아래는 코어 파괴 기능을 테스트하기 위한 임시 코드입니다.
            if (coreHealth.p1 <= 0 || coreHealth.p2 <= 0) return;

            if (P1_CORE_LOCATIONS.includes(clickedId)) {
                console.log('Player 1 코어 클릭됨!');
                coreHealth.p1--;
                console.log(`P1 HP: ${coreHealth.p1}`);
                updateStatus();
            } else if (P2_CORE_LOCATIONS.includes(clickedId)) {
                console.log('Player 2 코어 클릭됨!');
                coreHealth.p2--;
                console.log(`P2 HP: ${coreHealth.p2}`);
                updateStatus();
            } else {
                console.log(`빈 셀 클릭: ${clickedId}`);
            }
        }

        /**
         * 게임을 초기화하고 시작하는 함수
         */
        function startGame() {
            mainMenu.style.display = 'none';
            gameContainer.style.display = 'flex';
            
            createBoard();
            placeCores();
            updateStatus();
        }

        // --- 이벤트 리스너 연결 ---
        startButton.addEventListener('click', startGame);

    </script>
</body>
</html>
